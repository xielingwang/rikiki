<html>
	<head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<script src="../../core/jquery-1.7.1.min.js" type="text/javascript"></script>
		<script src="../../core/jquery.tmpl.min.js" type="text/javascript"></script>
		<script src="../../core/jquery.rikiki.core.develop.js" type="text/javascript"></script>
        <title>Model Tester - Rikiki JS MVC framework</title>
        <style type="text/css">
        #top-navigation li {
            display:inline-block;
        }
        .upper-case {
            text-transform:uppercase;
        }
        </style>
	</head>
	<body>
        <h1 class="upper-case">Action</h1>
        <select id="method" class="upper-case">
        </select>
        <div><button id="execute">EXECUTE</button></div>
        <div id="action">
        </div>
        <div>
            <a href='javascript:do_jsonp()'>Do JSONP</a>
        </div>
    </body>
</html>
<script type="text/javascript">
$("#execute").bind('click', function(){
    var useMethod = $("#method").val();
    switch (useMethod) {
        case 'query':
        var uri = '/contacts/contacts.php';
        Rikiki.httprequest_query(uri, null, null);
        break;
        case 'update':
        var uri = '/contacts/contacts.php';
        Rikiki.httprequest_query(uri, null, null);
        break;
        case 'create':
        var uri = '/contacts/contacts.php';
        Rikiki.httprequest_query(uri, null, null);
        break;
        case 'delete':
        var uri = '/contacts/contacts.php';
        Rikiki.httprequest_query(uri, null, null);
        break;
        default:
            throw "oh no!";
        break;
    }
});

function do_jsonp() {
    console.log('do_jsonp');
    $.getJSON('http://localhost/mt/demo/simple_demo/model-tester.php?action=?', function fuckyou(data) {console.log('do_jsonp', data.nick)});
}

var arr = [
    'update',
    'query',
    'create',
    'delete'
    ];
$.each(arr, function(k,v){
    $('<option />').addClass("upper-case").val(v).text(v).appendTo('#method');
});

var arr = [100,101,200,201,202,203,204,205,206,300,301,302,303,304,305,307,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,500,501,502,503,504,505,509];
$.each(arr, function(k,v){
    if (v % 100 === 0)
        $('<h2 />').text((v / 100) + 'xx').appendTo("#action");
    $('<button />').attr('status', v).text(v).appendTo('#action');
});

$("#action button").bind('click', function(){
    var useMethod = $("#method").val();
    switch (useMethod) {
        case 'query':
        var uri = '/model-tester.php?fuck=avc';
        var query_data = {output:Rikiki.Config('model.httprequest_dataType'), code:$(this).attr("status"), process_style:Rikiki.Config('model.process_style')};
        Rikiki.httprequest_query(uri, query_data);
        break;
        case 'update':
        var uri = '/model-tester.php?fuck=avc';
        var query_data = {output:Rikiki.Config('model.httprequest_dataType'), code:$(this).attr("status"), process_style:Rikiki.Config('model.process_style')};
        Rikiki.httprequest_update(uri, query_data,query_data);
        break;
        case 'create':
        var uri = '/model-tester.php?fuck=avc';
        var query_data = {output:Rikiki.Config('model.httprequest_dataType'), code:$(this).attr("status"), process_style:Rikiki.Config('model.process_style')};
        Rikiki.httprequest_create(uri, query_data, query_data);
        break;
        case 'delete':
        var uri = '/model-tester.php?fuck=avc';
        var query_data = {output:Rikiki.Config('model.httprequest_dataType'), code:$(this).attr("status"), process_style:Rikiki.Config('model.process_style')};
        Rikiki.httprequest_delete(uri, query_data);
        break;
        default:
            throw "oh no!";
        break;
    }
});
</script>